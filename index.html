<!DOCTYPE HTML>
<html lang="ja">
  <head>
    <title>対空砲火計算機</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="js/jquery.easytabs.min.js"></script>
    <script src="js/jquery.xdomainajax.js"></script>
    <script src="js/itemdata.js"></script>
    <script src="js/shipdata.js"></script>
    <script src="js/datalib.js"></script>
    <script src="js/data.js"></script>
    <script src="js/ecl.js"></script>
    <script src="js/preset.js"></script>
    <script src="js/util.js"></script>
    <script src="js/process.js"></script>
    <script src="js/select.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/select.css">
  </head>
  <body>
    <h2>対空砲火計算機　Ver2.0.0</h2>
    <p>艦これの対空砲火を計算できます</p>
    <br>
    <p>
      表示形式：
      <span id="showRadiogroup">
        <input type="radio" name="isShowUsualRow" value="true" onclick="changeShowRow()" checked> 従来方式(割合/固定)
        <input type="radio" name="isShowUsualRow" value="false" onclick="changeShowRow()"> 艦これ改方式(A/B)
      </span>
    </p>
    <p>
      <span id="radiogroup">
        <input type="radio" name="isFriend" value="true" onclick="initialize()" checked> 艦娘
        <input type="radio" name="isFriend" value="false" onclick="initialize()"> 深海棲艦
      </span>
      陣形：
      <select name="formation" id="formation" onchange="calc()">
        <option kc-id="1" value="1.0" selected>単縦陣</option>
        <option kc-id="2" value="1.2">複縦陣</option>
        <option kc-id="3" value="1.6">輪形陣</option>
        <option kc-id="4" value="1.0">梯形陣</option>
        <option kc-id="5" value="1.0">単横陣</option>
        <option kc-id="6" value="1.1">警戒陣</option>
        <option kc-id="11" value="1.1" style="display:none;" disabled>第一警戒航行序列</option>
        <option kc-id="12" value="1.0" style="display:none" disabled>第二警戒航行序列</option>
        <option kc-id="13" value="1.5" style="display:none" disabled>第三警戒航行序列</option>
        <option kc-id="14" value="1.0" style="display:none" disabled>第四警戒航行序列</option>
      </select>
      スロット機数：
      <input type="number" name="slotNum" id="slotNumSpinner" value="0" min="0" oninput="calc()" onchange="calc()">
      対空カットイン種別：
      <select name="tyku_cutin" id="tyku_cutin" onchange="calc()" title="14番以降は検証ソースです。AとBは合計値だけ合わせて後は適当に配置しています。">
        <option value="0" selected>0:なし</option>
        <option value="1">1:高角砲x2/電探&lt;秋月&gt;</option>
        <option value="2">2:高角砲/電探&lt;秋月&gt;</option>
        <option value="3">3:高角砲x2&lt;秋月&gt;</option>
        <option value="4">4:大口径主砲/三式弾/高射装置/電探</option>
        <option value="5">5:高角砲+高射装置x2/電探</option>
        <option value="6">6:大口径主砲/三式弾/高射装置</option>
        <option value="7">7:高角砲/高射装置/電探</option>
        <option value="8">8:高角砲+高射装置/電探</option>
        <option value="9">9:高角砲/高射装置</option>
        <option value="10">10:高角砲/集中機銃/電探&lt;摩耶&gt;</option>
        <option value="11">11:高角砲/集中機銃&lt;摩耶&gt;</option>
        <option value="12">12:集中機銃/機銃/電探</option>
        <option value="13" disabled>13:高角砲/機銃/電探</option>
        <option value="14">14:高角砲/機銃/電探&lt;五十鈴&gt;</option>
        <option value="15">15:高角砲/機銃&lt;五十鈴&gt;</option>
        <option value="16">16:高角砲/機銃/電探&lt;霞&gt;</option>
        <option value="17">17:高角砲/機銃&lt;霞&gt;</option>
        <option value="18">18:集中機銃&lt;皐月&gt;</option>
        <option value="19">19:高角砲(非高射装置)/集中機銃&lt;鬼怒&gt;</option>
        <option value="20">20:集中機銃&lt;鬼怒&gt;</option>
        <option value="21">21:高角砲/電探&lt;由良&gt;</option>
        <option value="22">22:集中機銃&lt;文月&gt;</option>
        <option value="23">23:機銃(非集中)&lt;UIT-25&gt;</option>
        <option value="24">24:高角砲/機銃(非集中)&lt;龍田&gt;</option>
        <option value="25">25:噴進砲改二/電探/三式弾&lt;伊勢&gt;</option>
        <option value="26">26:高角砲+増設機銃/電探&lt;武蔵&gt;</option>
        <option value="27" disabled>27:不明</option>
        <option value="28">28:噴進砲改二/電探&lt;伊勢&gt;</option>
        <option value="29">29:高角砲/電探&lt;浜風&gt;</option>
        <option value="30">30:高角砲x3&lt;天龍&gt;</option>
        <option value="31">31:高角砲x2&lt;天龍&gt;</option>
        <option value="32">32:ロケランx2 or FCR/ポンポン砲 or ロケラン/ポンポン砲&lt;英国&gt;</option>
        <option value="33">33:高角砲/機銃(非集中)</option>
        <option value="34">34:Fletcher砲改+GFCSx2\&lt;Johnston&gt;</option>
        <option value="35">35:Fletcher砲改+GFCS/Fletcher砲改&lt;Johnston&gt;</option>
        <option value="36">36:Fletcher砲改x2/GFCS&lt;Johnston&gt;</option>
        <option value="37">37:Fletcher砲改x2&lt;Johnston&gt;</option>
        <option value="38" disabled>38:不明</option>
        <option value="39">39:Atlanta砲+GFCS/Atlanta砲&lt;Atlanta&gt;</option>
        <option value="40">40:Atlanta砲x2/GFCS&lt;Atlanta&gt;</option>
        <option value="41">41:Atlanta砲x2&lt;Atlanta&gt;</option>
      </select>
      <span class="parseFriend">
        <span title="艦これブラウザ版の補正をかけます。艦これ改で計算する場合はチェックを外して下さい。"><input type="checkbox" id="useBrowserCheckBox" onchange="calc()" checked>ブラウザ版補正</span>
        <span class="space"></span>
        デッキビルダー反映：
        <input id="parseDeckFormatLabel" title="艦隊シミュレーター＆デッキビルダーで排出されたフォーマットをここに入力して、反映ボタンをクリックするとこの画面に反映されます。">
        <input type="button" value="反映" onclick="parseDeckFormat()">
      </span>
      <span class="parseEnemy">
        ID反映：
        <input id="parseIDLabel" title="艦IDから反映します。半角/全角数字以外の文字なら大体区切れます。&#x0A;第二艦隊分も繋げて書く。全角対応。&#x0A;例:「501,502,503,504,505,506」、「501,502,503,504,505,506,507,508,509,510,511,512」">
        <input type="button" value="反映" onclick="parseID()">
        <span class="space"></span>
        名前反映：
        <input id="parseNameLabel" title="艦名から反映します。読点「、」またはカンマ「,」で区切ること。第二艦隊分も繋げて書く。&#x0A; 例:「離島棲姫(B)*17、砲台小鬼(A)*18、砲台小鬼(B)*19、砲台小鬼(C)*20、集積地棲姫-壊(C)*21、軽巡ホ級flagship」">
        <input type="button" value="反映" onclick="parseName($('#parseNameLabel').val().split(/[、,\,]/))">
      </span>
    </p>
    <p>
      全滅確率：
      <input name="annihilation" id="annihilationLabel" value="100.00%" readonly>
      艦隊防空：
      <input name="kantai" id="kantaiLabel" value="0" readonly>
      <span id="isCombinedLabel" class="space">
        通常艦隊
      </span>
    </p>
    <table class="table" border="1" id="table">
      <tbody>
        <tr>
          <th colspan="15" id="header1">
            第一艦隊
            <input type="button" name="reset1" id="resetButton1" value="編成リセット" onclick="reset(1)">
          </th>
        </tr>
        <tr id="header1_">
          <td></td>
          <td>名前</td>
          <td>装備1</td>
          <td>装備2</td>
          <td>装備3</td>
          <td>装備4</td>
          <td>装備5</td>
          <td>装備6</td>
          <td>素対空</td>
          <td>加重対空</td>
          <td id="f1shotDownAheader">撃墜数A</td>
          <td id="f1shotDownBheader">撃墜数B</td>
          <td id="f1proportionShotDownHeader">割合撃墜</td>
          <td id="f1fixedShotDownHeader">固定撃墜</td>
          <td id="f1guaranteedShotDownHeader">最低保証</td>
          <td>最終撃墜数</td>
        </tr>
        <tr>
          <td class="no">一</td>
          <td id="f1s1name" class="input"></td>
          <td id="f1s1item1" class="input"></td>
          <td id="f1s1item2" class="input"></td>
          <td id="f1s1item3" class="input"></td>
          <td id="f1s1item4" class="input"></td>
          <td id="f1s1item5" class="input"></td>
          <td id="f1s1item6" class="input"></td>
          <td id="f1s1tyku" class="result"></td>
          <td id="f1s1kaju" class="result"></td>
          <td id="f1s1shotDownA" class="result"></td>
          <td id="f1s1shotDownB" class="result"></td>
          <td id="f1s1proportionShotDown" class="result"></td>
          <td id="f1s1fixedShotDown" class="result"></td>
          <td id="f1s1guaranteedShotDown" class="result"></td>
          <td id="f1s1total" class="result"></td>
        </tr>
        <tr>
          <td class="no">ニ</td>
          <td id="f1s2name" class="input"></td>
          <td id="f1s2item1" class="input"></td>
          <td id="f1s2item2" class="input"></td>
          <td id="f1s2item3" class="input"></td>
          <td id="f1s2item4" class="input"></td>
          <td id="f1s2item5" class="input"></td>
          <td id="f1s2item6" class="input"></td>
          <td id="f1s2tyku" class="result"></td>
          <td id="f1s2kaju" class="result"></td>
          <td id="f1s2shotDownA" class="result"></td>
          <td id="f1s2shotDownB" class="result"></td>
          <td id="f1s2proportionShotDown" class="result"></td>
          <td id="f1s2fixedShotDown" class="result"></td>
          <td id="f1s2guaranteedShotDown" class="result"></td>
          <td id="f1s2total" class="result"></td>
        </tr>
        <tr>
          <td class="no">三</td>
          <td id="f1s3name" class="input"></td>
          <td id="f1s3item1" class="input"></td>
          <td id="f1s3item2" class="input"></td>
          <td id="f1s3item3" class="input"></td>
          <td id="f1s3item4" class="input"></td>
          <td id="f1s3item5" class="input"></td>
          <td id="f1s3item6" class="input"></td>
          <td id="f1s3tyku" class="result"></td>
          <td id="f1s3kaju" class="result"></td>
          <td id="f1s3shotDownA" class="result"></td>
          <td id="f1s3shotDownB" class="result"></td>
          <td id="f1s3proportionShotDown" class="result"></td>
          <td id="f1s3fixedShotDown" class="result"></td>
          <td id="f1s3guaranteedShotDown" class="result"></td>
          <td id="f1s3total" class="result"></td>
        </tr>
        <tr>
          <td class="no">四</td>
          <td id="f1s4name" class="input"></td>
          <td id="f1s4item1" class="input"></td>
          <td id="f1s4item2" class="input"></td>
          <td id="f1s4item3" class="input"></td>
          <td id="f1s4item4" class="input"></td>
          <td id="f1s4item5" class="input"></td>
          <td id="f1s4item6" class="input"></td>
          <td id="f1s4tyku" class="result"></td>
          <td id="f1s4kaju" class="result"></td>
          <td id="f1s4shotDownA" class="result"></td>
          <td id="f1s4shotDownB" class="result"></td>
          <td id="f1s4proportionShotDown" class="result"></td>
          <td id="f1s4fixedShotDown" class="result"></td>
          <td id="f1s4guaranteedShotDown" class="result"></td>
          <td id="f1s4total" class="result"></td>
        </tr>
        <tr>
          <td class="no">五</td>
          <td id="f1s5name" class="input"></td>
          <td id="f1s5item1" class="input"></td>
          <td id="f1s5item2" class="input"></td>
          <td id="f1s5item3" class="input"></td>
          <td id="f1s5item4" class="input"></td>
          <td id="f1s5item5" class="input"></td>
          <td id="f1s5item6" class="input"></td>
          <td id="f1s5tyku" class="result"></td>
          <td id="f1s5kaju" class="result"></td>
          <td id="f1s5shotDownA" class="result"></td>
          <td id="f1s5shotDownB" class="result"></td>
          <td id="f1s5proportionShotDown" class="result"></td>
          <td id="f1s5fixedShotDown" class="result"></td>
          <td id="f1s5guaranteedShotDown" class="result"></td>
          <td id="f1s5total" class="result"></td>
        </tr>
        <tr>
          <td class="no">六</td>
          <td id="f1s6name" class="input"></td>
          <td id="f1s6item1" class="input"></td>
          <td id="f1s6item2" class="input"></td>
          <td id="f1s6item3" class="input"></td>
          <td id="f1s6item4" class="input"></td>
          <td id="f1s6item5" class="input"></td>
          <td id="f1s6item6" class="input"></td>
          <td id="f1s6tyku" class="result"></td>
          <td id="f1s6kaju" class="result"></td>
          <td id="f1s6shotDownA" class="result"></td>
          <td id="f1s6shotDownB" class="result"></td>
          <td id="f1s6proportionShotDown" class="result"></td>
          <td id="f1s6fixedShotDown" class="result"></td>
          <td id="f1s6guaranteedShotDown" class="result"></td>
          <td id="f1s6total" class="result"></td>
        </tr>
        <tr>
          <th colspan="15" id="header2">
            第ニ艦隊
            <input type="button" name="reset1" id="resetButton1" value="編成リセット" onclick="reset(2)">
          </th>
        </tr>
        <tr id="header2_">
          <td></td>
          <td>名前</td>
          <td>装備1</td>
          <td>装備2</td>
          <td>装備3</td>
          <td>装備4</td>
          <td>装備5</td>
          <td>装備6</td>
          <td>素対空</td>
          <td>加重対空</td>
          <td id="f2shotDownAheader">撃墜数A</td>
          <td id="f2shotDownBheader">撃墜数B</td>
          <td id="f2proportionShotDownHeader">割合撃墜</td>
          <td id="f2fixedShotDownHeader">固定撃墜</td>
          <td id="f2guaranteedShotDownHeader">最低保証</td>
          <td>最終撃墜数</td>
        </tr>
        <tr>
          <td class="no">一</td>
          <td id="f2s1name" class="input"></td>
          <td id="f2s1item1" class="input"></td>
          <td id="f2s1item2" class="input"></td>
          <td id="f2s1item3" class="input"></td>
          <td id="f2s1item4" class="input"></td>
          <td id="f2s1item5" class="input"></td>
          <td id="f2s1item6" class="input"></td>
          <td id="f2s1tyku" class="result"></td>
          <td id="f2s1kaju" class="result"></td>
          <td id="f2s1shotDownA" class="result"></td>
          <td id="f2s1shotDownB" class="result"></td>
          <td id="f2s1proportionShotDown" class="result"></td>
          <td id="f2s1fixedShotDown" class="result"></td>
          <td id="f2s1guaranteedShotDown" class="result"></td>
          <td id="f2s1total" class="result"></td>
        </tr>
        <tr>
          <td class="no">ニ</td>
          <td id="f2s2name" class="input"></td>
          <td id="f2s2item1" class="input"></td>
          <td id="f2s2item2" class="input"></td>
          <td id="f2s2item3" class="input"></td>
          <td id="f2s2item4" class="input"></td>
          <td id="f2s2item5" class="input"></td>
          <td id="f2s2item6" class="input"></td>
          <td id="f2s2tyku" class="result"></td>
          <td id="f2s2kaju" class="result"></td>
          <td id="f2s2shotDownA" class="result"></td>
          <td id="f2s2shotDownB" class="result"></td>
          <td id="f2s2proportionShotDown" class="result"></td>
          <td id="f2s2fixedShotDown" class="result"></td>
          <td id="f2s2guaranteedShotDown" class="result"></td>
          <td id="f2s2total" class="result"></td>
        </tr>
        <tr>
          <td class="no">三</td>
          <td id="f2s3name" class="input"></td>
          <td id="f2s3item1" class="input"></td>
          <td id="f2s3item2" class="input"></td>
          <td id="f2s3item3" class="input"></td>
          <td id="f2s3item4" class="input"></td>
          <td id="f2s3item5" class="input"></td>
          <td id="f2s3item6" class="input"></td>
          <td id="f2s3tyku" class="result"></td>
          <td id="f2s3kaju" class="result"></td>
          <td id="f2s3shotDownA" class="result"></td>
          <td id="f2s3shotDownB" class="result"></td>
          <td id="f2s3proportionShotDown" class="result"></td>
          <td id="f2s3fixedShotDown" class="result"></td>
          <td id="f2s3guaranteedShotDown" class="result"></td>
          <td id="f2s3total" class="result"></td>
        </tr>
        <tr>
          <td class="no">四</td>
          <td id="f2s4name" class="input"></td>
          <td id="f2s4item1" class="input"></td>
          <td id="f2s4item2" class="input"></td>
          <td id="f2s4item3" class="input"></td>
          <td id="f2s4item4" class="input"></td>
          <td id="f2s4item5" class="input"></td>
          <td id="f2s4item6" class="input"></td>
          <td id="f2s4tyku" class="result"></td>
          <td id="f2s4kaju" class="result"></td>
          <td id="f2s4shotDownA" class="result"></td>
          <td id="f2s4shotDownB" class="result"></td>
          <td id="f2s4proportionShotDown" class="result"></td>
          <td id="f2s4fixedShotDown" class="result"></td>
          <td id="f2s4guaranteedShotDown" class="result"></td>
          <td id="f2s4total" class="result"></td>
        </tr>
        <tr>
          <td class="no">五</td>
          <td id="f2s5name" class="input"></td>
          <td id="f2s5item1" class="input"></td>
          <td id="f2s5item2" class="input"></td>
          <td id="f2s5item3" class="input"></td>
          <td id="f2s5item4" class="input"></td>
          <td id="f2s5item5" class="input"></td>
          <td id="f2s5item6" class="input"></td>
          <td id="f2s5tyku" class="result"></td>
          <td id="f2s5kaju" class="result"></td>
          <td id="f2s5shotDownA" class="result"></td>
          <td id="f2s5shotDownB" class="result"></td>
          <td id="f2s5proportionShotDown" class="result"></td>
          <td id="f2s5fixedShotDown" class="result"></td>
          <td id="f2s5guaranteedShotDown" class="result"></td>
          <td id="f2s5total" class="result"></td>
        </tr>
        <tr>
          <td class="no">六</td>
          <td id="f2s6name" class="input"></td>
          <td id="f2s6item1" class="input"></td>
          <td id="f2s6item2" class="input"></td>
          <td id="f2s6item3" class="input"></td>
          <td id="f2s6item4" class="input"></td>
          <td id="f2s6item5" class="input"></td>
          <td id="f2s6item6" class="input"></td>
          <td id="f2s6tyku" class="result"></td>
          <td id="f2s6kaju" class="result"></td>
          <td id="f2s6shotDownA" class="result"></td>
          <td id="f2s6shotDownB" class="result"></td>
          <td id="f2s6proportionShotDown" class="result"></td>
          <td id="f2s6fixedShotDown" class="result"></td>
          <td id="f2s6guaranteedShotDown" class="result"></td>
          <td id="f2s6total" class="result"></td>
        </tr>
      </tbody>
    </table>
    <div id="friendItemDialog" title="装備選択">
      <div id="friendItemTab-container" class="tab-container">
      </div>
    </div>
    <div id="friendShipDialog" title="艦娘選択">
      <div id="friendShipTab-container" class="tab-container">
      </div>
    </div>
    <div id="enemyItemDialog" title="装備選択">
      <div id="enemyItemTab-container" class="tab-container">
      </div>
    </div>
    <div id="enemyShipDialog" title="深海棲艦選択">
      <div id="enemyShipTab-container" class="tab-container">
      </div>
    </div>
    <p>・撃墜数の見方について</p>
    <p>最終撃墜数の見方 -> 「最低撃墜数 - 最高撃墜数」</p>
    <p>・デッキビルダーから反映機能について</p>
    <p><q cite=”http://kancolle-calc.net/deckbuilder.html”>{version: 4, f1: {s1: {id: '100', lv: 40, luck: -1, items:{i1:{id:1, rf: 4, mas:7},{i2:{id:3, rf: 0}}...,ix:{id:43}}}, s2:{}...},...}</q></p>
    <p><a href="http://kancolle-calc.net/deckbuilder.html" target="_blank">艦隊シミュレーター＆デッキビルダー</a>で排出された上のようなフォーマットを入力してから反映ボタンをクリックすることで、お手軽に実行ができます(و 'ω')و</p>
    
    <br/>
    <p>既知の問題:</p>
    <ul>
      <li>空襲戦未対応</li>
      <li>A/B式や深海側の計算が正しく動作しない(削除してないだけ)</li>
    </ul>

    <br/>
    <p>オリジナル版作成者：<a href="https://twitter.com/Nishisonic" target="_blank">@Nishisonic</a></p>
    <p>現行版作成者: <a href="https://twitter.com/ebigunso" target="_blank">@ebigunso</a></p>
    <textarea cols="40" rows="6" style="overflow:auto;width:50em;" readonly>
      ver2.0.0 2020/02/02 Nishisonicさんの計算機をベースに大幅改修. wiki記載のブラウザ版計算式を用いるように変更, 新艦娘・新アイテムに対応. A/B式および深海側の計算対応とりやめ.
    </textarea>
  </body>
</html>